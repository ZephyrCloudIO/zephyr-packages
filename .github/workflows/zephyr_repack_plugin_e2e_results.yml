name: Process Zephyr Repack Plugin E2E Test Results

on:
  pull_request:
    branches:
      - master
#  workflow_dispatch:
#    inputs:
#      workflow_status:
#        description: "Status of the E2E Tests"
#        required: true
#      commit_sha:
#        description: "Commit SHA"
#        required: true
#      run_url:
#        description: "URL to the workflow run"
#        required: true

jobs:
  process-results:
    runs-on: ubuntu-latest
    steps:
      - name: Get Workflow Status
        run: |
          echo "🔍 **E2E Test Results Received**"
          echo "📌 **Status:** ${{ github.event.inputs.workflow_status }}"
          echo "🔗 **Commit SHA:** ${{ github.event.inputs.commit_sha }}"
          echo "🔗 **Run URL:** ${{ github.event.inputs.run_url }}"

      - name: Fail if Tests Failed
        if: github.event.inputs.workflow_status != 'success'
        run: |
          echo "❌ E2E tests failed! See logs above."
          exit 1
